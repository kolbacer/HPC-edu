# Задание H (OpenMP)

Написать программу вычисления матричного выражения:

$A = Tr(BC^3)E+Tr'(B)I$,

где $B,C$ - квадратные плотные матрицы, элементы которых имеют тип **double**, $I$ - единичная матрица, $Tr(M)$ - след матрицы $M$, $Tr'(M)$ - "антислед" матрицы $M$ (сумма элементов антидиагонали). Распараллелить эту программу с помощью OpenMP (parallel, task). Исследовать зависимость масштабируемости параллельной версии программы от её вычислительной трудоёмкости (размера матриц). Проверить корректность параллельной версии.

Проверка закона Амдала. Построить зависимость *ускорение:число потоков* для заданного примера.

## Требования
- `CMake 3.5+`
- `Какой-либо компилятор C++11`
- `OpenMP 3.0+`

## Использование
### Конфигурирование
В корне проекта:
```console
usr:~/01.OpenMP$ mkdir build
usr:~/01.OpenMP$ cd build
usr:~/01.OpenMP/build$ cmake ..
```
### Сборка
```console
usr:~/01.OpenMP/build$ cmake --build .
```
### Запуск примера
```console
usr:~/01.OpenMP/build$ ./HPC_01_OpenMP
```
### Запуск тестов
```console
usr:~/01.OpenMP/build$ ctest
```
### Запуск бенчмарков
```console
usr:~/01.OpenMP/build$ ./HPC_01_benchmark
```

## Производительность

Программно-аппаратная конфигурация:
| | |
| --- | --- |
ОС | Ubuntu 22.04.2 LTS |
Число ядер | 6 |
Число потоков |	12 |
Модель процессора |	Intel(R) Xeon(R) E-2136 CPU @ 3.30GHz |
ОЗУ | 64GiB |
Компилятор | g++ (GCC) 10.2.0 |

Зависимость времени работы от числа потоков (*n* - размер матриц):

![OpenMP_time](results/OpenMP_time.png)

Зависимость ускорения от числа потоков: 

![OpenMP_speedup](results/OpenMP_speedup.png)

Ускорение $S(n)=T(1)/T(n)$, где $T(n)$ - время работы алгоритма на $n$ процессорах.


## Структура проекта
```
.
├── README.md - описание проекта (на английском)
├── README.ru.md - описание проекта (на русском)
├── CMakeLists.txt - сценарий сборки CMake
├── results/ - папка с результатами эксперимента
├── main.cpp - точка входа (примеры)
├── include - заголовки
│   └── matrix.h - описание класса матрицы
├── src
│   ├── matrix_base.cpp - основные методы
│   ├── matrix_math.cpp - матричная алгебра
│   ├── matrix_math_parallel.cpp - параллельные методы
│   └── matrix_utils.cpp - вспомогательные методы
├── tests - unit-тесты
│   └── test.cpp
└── benchmarks - бенчмарки
    └── benchmark.cpp
```
